(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","videojs","imagesloaded","jquery-ui"],e)}else{e(jQuery,videojs)}})(function(e,t){e.BigVideo=function(n){function E(){var t=w.container.outerWidth()<e(window).width()?w.container.outerWidth():e(window).width(),n=w.container.outerHeight()<e(window).height()?w.container.outerHeight():e(window).height(),r=t/n;if(w.container.is(e("body"))){e("html,body").css("height",e(window).height()>e("body").css("height","auto").height()?"100%":"auto")}if(r<f){if(b=="video"){s.width(n*f).height(n);if(!w.shrinkable){e(o).css("top",0).css("left",-(n*f-t)/2).css("height",n)}else{e(o).css("top",-(t/f-n)/2).css("left",0).css("height",t/f)}e(o+"_html5_api").css("width",n*f).css("height",n);e(o+"_flash_api").css("width",n*f).css("height",n)}else{e("#big-video-image").css({width:"auto",height:n,top:0,left:-(n*f-t)/2})}}else{if(b=="video"){s.width(t).height(t/f);e(o).css("top",-(t/f-n)/2).css("left",0).css("height",t/f);e(o+"_html5_api").css("width",e(o+"_html5_api").parent().width()+"px").css("height","auto");e(o+"_flash_api").css("width",t).css("height",t/f)}else{e("#big-video-image").css({width:t,height:"auto",top:-(t/f-n)/2,left:0})}}}function S(){var t=d?"pause":"play";var n=m?"fa-volume-up":"fa-volume-off";var r=""+'<div id="big-video-control-container">'+'<div id="big-video-control">'+'<a href="#" id="big-video-control-play"><i class="fa fa-'+t+'"></i></a>'+'<a href="#" id="big-video-control-sound"><i class="fa '+n+'"></i></a>'+'<div id="big-video-control-middle">'+'<div id="big-video-control-bar">'+'<div id="big-video-control-bound-left"></div>'+'<div id="big-video-control-progress"></div>'+'<div id="big-video-control-track"></div>'+'<div id="big-video-control-bound-right"></div>'+"</div>"+"</div>"+'	<div id="big-video-control-timer"></div>'+"</div>"+"</div>";w.container.append(r);e("#big-video-control-container").css("display","none");e("#big-video-control-timer").css("display","none");e("#big-video-control-track").slider({animate:true,step:.01,slide:function(t,n){p=true;e("#big-video-control-progress").css("width",n.value-.16+"%");s.currentTime(n.value/100*s.duration())},stop:function(e,t){p=false;s.currentTime(t.value/100*s.duration())}});e("#big-video-control-bar").click(function(t){s.currentTime(t.offsetX/e(this).width()*s.duration())});e("#big-video-control-play").click(function(e){e.preventDefault();x("toggle")});s.on("timeupdate",function(){if(!p&&s.currentTime()/s.duration()){var t=s.currentTime();var n=Math.floor(t/60);var r=Math.floor(t)-60*n;if(r<10)r="0"+r;var i=s.currentTime()/s.duration()*100;e("#big-video-control-track").slider("value",i);e("#big-video-control-progress").css("width",i-.16+"%");e("#big-video-control-timer").text(n+":"+r+"/"+l)}})}function x(t){var n=t||"toggle";if(n=="toggle")n=d?"pause":"play";if(n=="pause"){s.pause();e("#big-video-control-play").css("background-position","-16px").find("i").removeClass("fa-pause").addClass("fa-play");d=false}else if(n=="play"){s.play();e("#big-video-control-play").css("background-position","0").find("i").removeClass("fa-play").addClass("fa-pause");d=true}else if(n=="skip"){N()}}function T(){s.play();w.container.off("click",T)}function N(){y++;if(y===g.length)y=0;C(g[y])}function C(t){e(o).css("display","block");b="video";s.src(t);if(m){e("#big-video-control-container").css("display","none");s.ready(function(){s.volume(0)});doLoop=true}else{e("#big-video-control-container").css("display","block");s.ready(function(){s.volume(w.defaultVolume)});doLoop=false}e("#big-video-image").css("display","none");e(o).css("display","block")}function k(t){e("#big-video-image").remove();s.pause();e(o).css("display","none");e("#big-video-control-container").css("display","none");b="image";var n=e('<img id="big-video-image" src='+t+" />");u.append(n);e("#big-video-image").imagesLoaded(function(){f=e("#big-video-image").width()/e("#big-video-image").height();E()})}var r={useFlashForFirefox:true,forceAutoplay:false,controls:false,doLoop:false,container:e("#video"),shrinkable:false,defaultVolume:.8};var i=this,s,o="#big-video-vid",u=e('<div id="big-video-wrap"></div>'),a=e(""),f=16/9,l=0,c=.8,h=false,p=false,d=false,v=false,m=false,g=[],y,b;var w=e.extend({},r,n);i.init=function(){if(!h){w.container.prepend(u);var n=w.forceAutoplay?"autoplay":"";s=e('<video id="'+o.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+n+" webkit-playsinline></video>");s.css("position","absolute");u.append(s);var r=["html5","flash"];var i=navigator.userAgent.toLowerCase();var a=i.indexOf("firefox")!=-1;if(w.useFlashForFirefox&&a){r=["flash","html5"]}s=t(o.substr(1),{controls:true,autoplay:w.forceAutoplay,preload:"auto",techOrder:r});if(w.controls)S();E();h=true;d=false;if(w.forceAutoplay){e("body").on("click",T)}e("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%");e(window).on("resize.bigvideo",function(){E()});s.on("loadedmetadata",function(t){if(document.getElementById("big-video-vid_flash_api")){f=document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight")}else{f=e("#big-video-vid_html5_api").prop("videoWidth")/e("#big-video-vid_html5_api").prop("videoHeight")}E();var n=Math.round(s.duration());var r=Math.floor(n/60);var i=n-r*60;if(i<10)i="0"+i;l=r+":"+i});s.on("ended",function(){if(w.doLoop){s.currentTime(0);s.play()}else{e("#big-video-control-play").find("i").removeClass("fa-pause").addClass("fa-play")}if(v){N()}})}};i.show=function(t,n){if(n===undefined)n={};m=n.ambient===true;if(n.doLoop)w.doLoop=true;if(typeof t==="string"){var r=t.lastIndexOf("?")>0?t.substring(t.lastIndexOf(".")+1,t.lastIndexOf("?")):t.substring(t.lastIndexOf(".")+1);if(r=="jpg"||r=="gif"||r=="png"){k(t)}else if(r=="mp4"||r=="ogg"||r=="ogv"||r=="webm"){C(t);if(n.onShown)n.onShown();v=false}}else if(e.isArray(t)){C(t)}else if(typeof t==="object"&&t.src&&t.type){C([t])}else{throw"BigVideo.show received invalid input for parameter source"}};i.showPlaylist=function(t,n){if(!e.isArray(t)){throw"BigVideo.showPlaylist parameter files accepts only arrays"}if(n===undefined)n={};m=n.ambient===true;if(m||n.doLoop)w.doLoop=true;g=t;y=0;this.show(g[y]);if(n.onShown)n.onShown();v=true};i.getPlayer=function(){return s};i.remove=i.dispose=function(){h=false;u.remove();e(window).off("resize.bigvideo");if(s){s.off("loadedmetadata");s.off("ended");s.dispose()}};i.triggerPlayer=function(e){x(e)}}})